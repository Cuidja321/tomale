<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Consulta - Â¿Te estÃ¡n engaÃ±ando?</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #ece5dd;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }
    .whatsapp {
      width: 360px;
      height: 640px;
      background-color: #fff;
      display: flex;
      flex-direction: column;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 0 10px rgba(0,0,0,0.2);
    }
    .header {
      background-color: #075E54;
      color: white;
      padding: 10px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .profile-pic {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid white;
    }
    .header-info {
      display: flex;
      flex-direction: column;
    }
    .header-info h2 {
      margin: 0;
      font-size: 16px;
    }
    .header-info p {
      margin: 0;
      font-size: 12px;
      opacity: 0.8;
    }
    .messages {
      flex: 1;
      padding: 10px;
      overflow-y: auto;
      background-color: #e5ddd5;
      display: flex;
      flex-direction: column;
    }
    .message {
      max-width: 70%;
      padding: 8px 12px;
      margin: 5px 0;
      border-radius: 7.5px;
      line-height: 1.4;
      word-wrap: break-word;
      font-size: 14px;
      position: relative;
    }
    .sent {
      background-color: #dcf8c6;
      align-self: flex-end;
      border-bottom-right-radius: 0;
    }
    .received {
      background-color: white;
      align-self: flex-start;
      border-bottom-left-radius: 0;
    }
    .input-area {
      display: flex;
      padding: 10px;
      border-top: 1px solid #ccc;
      background-color: #f0f0f0;
      gap: 5px;
    }
    .input-text {
      flex: 1;
      padding: 8px 12px;
      border: 1px solid #ccc;
      border-radius: 20px;
      font-size: 14px;
    }
    .input-btn {
      background-color: #075E54;
      color: white;
      border: none;
      padding: 8px 12px;
      border-radius: 20px;
      cursor: pointer;
      font-size: 14px;
    }
    .input-btn:hover {
      background-color: #064d44;
    }
    .typing {
      font-style: italic;
      color: #555;
      margin: 5px 0;
    }
    .options {
      display: flex;
      flex-direction: column;
      gap: 5px;
      margin-top: 10px;
    }
    .option-btn {
      background-color: #075E54;
      color: white;
      border: none;
      padding: 8px 12px;
      border-radius: 20px;
      cursor: pointer;
      font-size: 14px;
    }
    .option-btn:hover {
      background-color: #064d44;
    }
    .audio-container, .image-container {
      width: 100%;
      margin-top: 10px;
    }
    .audio-player {
      width: 100%;
      height: 40px;
      display: block;
    }
    .image-message {
      width: 100%;
      border-radius: 8px;
      display: block;
    }
  </style>
</head>
<body>

<div class="whatsapp">
  <div class="header">
    <img src="assets/profile.jpg" alt="Dr. Liliam Volutia" class="profile-pic">
    <div class="header-info">
      <h2>Dr. Liliam Voluti</h2>
      <p>en lÃ­nea</p>
    </div>
  </div>

  <div class="messages" id="messages"></div>

  <div class="input-area">
    <input class="input-text" id="userInput" placeholder="Escribe aquÃ­..." />
    <button class="input-btn" onclick="handleUserInput()">Enviar</button>
  </div>
</div>

<script>
  const messagesDiv = document.getElementById('messages');
  const userInput = document.getElementById('userInput');

  let sequenceIndex = 0;
  let awaitingText = false;

  const sequence = [
    { type: "intro", text: "Hola," },
    { type: "intro", text: "Mucho gusto, soy MarÃ­a, espero que estÃ©s muy bien..." },
    { type: "intro", text: "Te ayudarÃ© a acabar con tu sospecha hoy mismo ðŸš¨" },
    { type: "intro", text: "Te voy a mandar un audio explicando sobre el caso de una clienta mÃ­a que estaba pasando por lo mismo ðŸ”ˆðŸ¤—" },
    { type: "intro", text: "Haz clic abajo ðŸ‘‡" },
    { type: "audio", src: "assets/firstaudio.mp3", preDelay: 1000, delay: 1000 },
    { type: "text", text: "Â¿CuÃ¡l es el nombre de tu esposo/novio?" },
    { type: "text", text: "Â¿CuÃ¡l es el nÃºmero de telÃ©fono de tu esposo/novio?" },
    { type: "options", text: "Â¿CuÃ¡nto tiempo llevan juntos?", options: ["Menos de 6 meses", "Entre 6 meses y 2 aÃ±os", "MÃ¡s de 2 aÃ±os"] },
    { type: "options", text: "Â¿Sospechas que te estÃ¡ engaÃ±ando?", options: ["SÃ­", "No", "A veces lo pienso"] },
    { type: "options", text: "Â¿Ã‰l suele esconder su celular o girar la pantalla cuando te acercas?", options: ["SÃ­, siempre", "SÃ³lo a veces", "No, es muy tranquilo"] },
    { type: "options", text: "Â¿Alguna vez encontraste mensajes sospechosos en su celular?", options: ["SÃ­", "No", "Nunca he podido revisar"] },
    { type: "options", text: "Â¿Tiene muchas amigas o contactos femeninos en WhatsApp?", options: ["SÃ­, muchas", "Algunas", "No, casi ninguna"] },
    { type: "options", text: "Â¿Suele salir sin avisarte o inventar excusas extraÃ±as?", options: ["SÃ­, frecuentemente", "De vez en cuando", "No, siempre me explica todo"] },
    { type: "options", text: "Â¿Evita que uses su celular?", options: ["SÃ­, totalmente", "SÃ³lo en algunos momentos", "No, me deja usarlo con confianza"] },
    { type: "options", text: "Â¿Recibe muchos mensajes tarde en la noche o en horarios extraÃ±os?", options: ["SÃ­, casi todos los dÃ­as", "A veces", "No, nunca"] },
    { type: "options", text: "Â¿Lo has escuchado hablar en voz baja o escondiÃ©ndose cuando estÃ¡ al telÃ©fono?", options: ["SÃ­", "No", "No lo sÃ©, nunca lo notÃ©"] },
    { type: "options", text: "Â¿Pasa mucho tiempo en lÃ­nea en WhatsApp aunque no estÃ© hablando contigo?", options: ["SÃ­, todo el tiempo", "SÃ³lo a veces", "No, casi nunca"] },
    { type: "options", text: "Â¿Ha cambiado la contraseÃ±a de su celular o de WhatsApp recientemente?", options: ["SÃ­", "No", "No lo sÃ©"] },
    { type: "options", text: "Â¿Suele desactivar las notificaciones o poner el modo silencioso cuando estÃ¡ contigo?", options: ["SÃ­, siempre", "SÃ³lo de vez en cuando", "No, nunca"] },
    { type: "options", text: "Â¿CÃ³mo describirÃ­as su comportamiento Ãºltimamente?", options: ["FrÃ­o y distante", "Igual que siempre", "MÃ¡s cariÃ±oso que antes"] },
    { type: "audio", src: "assets/audio1.mp3", preDelay: 1000, delay: 1000 },
    { type: "audio", src: "assets/audio2.mp3", preDelay: 1000, delay: 1000 },
    { type: "image", src: "assets/part3.jpg", preDelay: 1000, delay: 2000, blur: 3 },
    { type: "image", src: "assets/part4.jpg", preDelay: 1000, delay: 2000, blur: 14 },
    { type: "text", text: "Me gustarÃ­a poder pagar este sistema y la herramienta por mi cuenta, pero no puedo sola ðŸ˜¢" },
    { type: "text", text: "La tarifa es de $10.00, solamente para cubrir los costos y liberar esta informaciÃ³n, Â¿ok?" },
    { type: "options", text: "Â¿Puedo contar con esta pequeÃ±a contribuciÃ³n?", options: ["Â¡SÃ­,Â claro!"]Â },
    { type: "audio", src: "assets/audio3.mp3", preDelay: 1000, delay: 1000 },
  ];

  function addMessage(content, className) {
    const newMessage = document.createElement('div');
    newMessage.className = `message ${className}`;
    newMessage.innerHTML = content;
    messagesDiv.appendChild(newMessage);
    messagesDiv.scrollTop = messagesDiv.scrollHeight;
  }

  function addAudioMessage(element) {
    const container = document.createElement('div');
    container.className = 'audio-container';
    container.appendChild(element);
    messagesDiv.appendChild(container);
    messagesDiv.scrollTop = messagesDiv.scrollHeight;
  }

  function addImageMessage(element) {
    const container = document.createElement('div');
    container.className = 'image-container';
    container.appendChild(element);
    messagesDiv.appendChild(container);
    messagesDiv.scrollTop = messagesDiv.scrollHeight;
  }

  function addTypingEffect(duration, callback) {
    const typing = document.createElement('div');
    typing.className = 'typing';
    typing.textContent = "Escribiendo";
    messagesDiv.appendChild(typing);
    messagesDiv.scrollTop = messagesDiv.scrollHeight;

    let dots = 0;
    const interval = setInterval(() => {
      dots = (dots + 1) % 4;
      typing.textContent = "Escribiendo" + ".".repeat(dots);
    }, 500);

    setTimeout(() => {
      clearInterval(interval);
      typing.remove();
      callback();
    }, duration);
  }

  function processNext() {
    if (sequenceIndex >= sequence.length) {
      return;
    }

    const step = sequence[sequenceIndex];
    sequenceIndex++;

    if (step.type === "intro" || step.type === "text" || step.type === "options") {
      addTypingEffect(1000, () => {
        addMessage(step.text, "received");
        if (step.type === "text") {
          awaitingText = true;
        } else if (step.type === "options") {
          showOptions(step.options);
        } else {
          setTimeout(processNext, 500);
        }
      });
    } else if (step.type === "audio") {
      addTypingEffect(1000, () => {
        const preDelay = step.preDelay || 0;
        setTimeout(() => {
          const audio = document.createElement('audio');
          audio.className = 'audio-player';
          audio.controls = true;
          audio.src = step.src;
          audio.load();
          audio.autoplay = true;

          addAudioMessage(audio);

          const postDelay = step.delay || 1000;
          setTimeout(() => {
            processNext();
          }, postDelay);
        }, preDelay);
      });
    } else if (step.type === "image") {
      addTypingEffect(1000, () => {
        const preDelay = step.preDelay || 0;
        setTimeout(() => {
          const img = document.createElement('img');
          img.className = 'image-message';
          img.src = step.src;
          img.alt = 'Imagem enviada';
          if (step.blur) {
            img.style.filter = `blur(${step.blur}px)`;
          }
          addImageMessage(img);

          const postDelay = step.delay || 500;
          setTimeout(() => {
            processNext();
          }, postDelay);
        }, preDelay);
      });
    }
  }

  function showOptions(options) {
    const optionsDiv = document.createElement('div');
    optionsDiv.className = 'options';
    options.forEach(opt => {
      const btn = document.createElement('button');
      btn.className = 'option-btn';
      btn.textContent = opt;
      btn.onclick = () => {
        addMessage(opt, 'sent');
        optionsDiv.remove();
        processNext();
      };
      optionsDiv.appendChild(btn);
    });
    messagesDiv.appendChild(optionsDiv);
    messagesDiv.scrollTop = messagesDiv.scrollHeight;
  }

  function handleUserInput() {
    const input = userInput.value.trim();
    if (!input) return;
    addMessage(input, 'sent');
    userInput.value = '';
    if (awaitingText) {
      awaitingText = false;
      processNext();
    }
  }

  window.onload = () => {
    setTimeout(processNext, 500);
  };
</script>

</body>
</html>
